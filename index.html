<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="./output.css" rel="stylesheet">
    <title>Página em branco</title>
    <style>
      body {
        display: flex;
        text-align: center;
        align-items: center;
        justify-content: center;
        height: 100vh;
        width: 100vw;
        background: linear-gradient(blue, white);
        background-size: contain;
        background-repeat: no-repeat;
        font-family: Arial, Helvetica, sans-serif;
        flex-direction: column;
      }

      .container {
        background-color: white;
        padding: 0px 10px 50px 10px;
        text-align: center;
        border-radius: 10px;
      }

      h1 {
        font-family: Arial, Helvetica, sans-serif;
        background: white;
        padding: 10px;
        border-radius: 20px;
        font-size: 25px;
      }

      button {
        padding: 10px;
        color: black;
        background-color: white;
        cursor: pointer;
        border-radius: 10px;
      }

      .container-products {
        display: none;
        background-color: white;
        margin-top: 20px;
        flex-direction: column;
        padding: 0px 15px 10px 15px;
        border-radius: 10px;
      }

      .container-fechar {
        text-align: right;
      }

      .container-fechar p {
        font-size: 20px;
        cursor: pointer;
      }

      .container-products label {
        color: white;
        font-size: 15px;
        font-family: "Lucida Sans", "Lucida Sans Regular", "Lucida Grande", "Lucida Sans Unicode", Geneva, Verdana, sans-serif;
      }

      .container-info {
        display: flex;
        width: 100%;
        padding-left: 5px;
        margin-bottom: 10px;
        text-align: center;
        align-items: center;
        justify-content: space-between;
        border: 1px solid rgba(0, 0, 0, 0.241);
        background-color: rgb(147, 147, 246);
        box-sizing: border-box;
      }

      .container-info label {
        flex: 1;
        text-align: right;
        padding-right: 10px;
      }

      .container-info input {
        flex: 2;
        padding: 5px;
        width: 100%;
        outline: none;
        box-sizing: border-box;
      }

      .container-img {
        display: flex;
        text-align: center;
        align-items: center;
        justify-content: space-around;
      }

      button {
        color: white;
        background-color: rgb(147, 147, 246);
        margin-top: 10px;
        width: 100px;
        border: 0;
        cursor: pointer;
        font-weight: bold;
        font-family: "Lucida Sans", "Lucida Sans Regular", "Lucida Grande", "Lucida Sans Unicode", Geneva, Verdana, sans-serif;
      }

      button:hover {
        background-color: rgba(46, 46, 243, 0.606);
        transition: 1s;
      }

      .btn-envio{
        padding: 5px;
        color: white;
        background-color: rgb(147, 147, 246);
      }

      .container-pesquisa-produto{
        display: flex;
        width: 200px;
        text-align: center;
        background-color: rgb(147, 147, 246);
        margin-top: 10px;
      }
      .pesquisar-produto {
      padding: 5px;
      width: 100%;
      border-top: none;
      border-right: none;
      border-left: none;
      border-bottom: 2px solid #d1d5db;
    }
    .pesquisar-produto:focus {
      border-bottom-color: #3b82f6;
      outline: none;
    }

      .container-lista-produtos {
        display: none;
        margin-top: 10px;
        padding: 10px;
        width: 350px;
        background-color: white;
      }

      .container-icones {
        display: flex;
        text-align: center;
        align-items: center;
        justify-content: space-between;
        border: 2px solid rgba(0, 0, 0, 0.361);
        margin-bottom: 10px;
        padding: 10px;
      }

      .container-icones img {
        margin-left: 10px;
        cursor: pointer;
      }

      .teste{
        display: flex;
        text-align: center;
        justify-content: center;
        margin-top: 10px;

      }
    </style>
  </head>
  <body>
    <!-- Container Principal "Cadastro de produtos" -->
    <div class="w-fit container" id="container">
      <h1 class="font-semibold text-xl">Cadastro de produto</h1>
      <div class="container-img mb-7">
        <img class="w-14" src="./imagens/adicionar-produto.png" alt="" height="50px">
        <img  class="w-14" src="./imagens/lista-de-desejos.png" alt="" height="30px">
      </div>

      <div class="container-cadastro w-fit">
        <div class="container-interacoes">
          <div>
            <button class="bg-[#60a5fa] text-[#f8fafc]" onclick="cadastrarProduto()">Cadastrar produto</button>
            <button class="bg-[#60a5fa]  text-[#f8fafc]" onclick="listarProdutos()">Listar produtos</button><br>
            <div class="teste">

              <div class="container-pesquisa-produto">
                <a>
                  <img class="w-12" src="./imagens/search.png" alt="" onclick="buscarporID()">
                </a>
                <input class="pesquisar-produto" type="number" placeholder="Pesquise pelo produto...">
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- Container do cadastro do produto -->
    <div class="container-products " id="container-products">
      <div class="container-fechar">
        <p onclick="fecharcontainer()">X</p>
      </div>
      <div class="container-info">
        <label> Nome </label>
        <input id="nome" type="text" placeholder="Nome do produto" required /><br />
      </div>

      <div class="container-info">
        <label> Descrição </label>
        <input id="descricao" type="text" placeholder="Descrição..." required /><br />
      </div>

      <div class="container-info">
        <label> Preço </label>
        <input id="preco" type="number" placeholder="Preço do produto" required /><br />
      </div>

      <div class="container-info">
        <label> Peso </label>
        <input id="peso" type="number" placeholder="Peso do produto" required /><br />
      </div>

      <button onclick="enviarCadastro()" class="btn-envio">Enviar</button>
    </div>

    <!-- Container "Listar Produtos" display:none-->
    <div id="container-lista-produtos" class="  hidden w-fit" >
      <div id="container-lista-produtos">
        <table class="min-w-full divide-y divide-gray-200 my-5">
          <thead class="bg-blue-400">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descrição</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Preço</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Peso</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">editar</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">excluir</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">Produto</td>
              <td class="px-6 py-4 whitespace-nowrap">Descrição</td>
              <td class="px-6 py-4 whitespace-nowrap">$10.00</td>
              <td class="px-6 py-4 whitespace-nowrap">1kg</td>

              <td class="px-6 py-4 whitespace-nowrap">
                <img src="./imagens/editar.png" alt="Editar" class="w-6 h-6">
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <img src="./imagens/lixeira-de-reciclagem.png" alt="Excluir" class="w-6 h-6">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <script>
      function cadastrarProduto() {
        document.getElementById("container").style.display = "none";
        document.getElementById("container-products").style.display = "block";
        document.getElementById("container-lista-produtos").style.display = "none";
      }

      function fecharcontainer() {
        document.getElementById("container-products").style.display = "none";
        document.getElementById("container-lista-produtos").style.display = "none";
        document.getElementById("container").style.display = "block";
      }

      async function listarProdutos() {
        const containerListaProdutos = document.getElementById("container-lista-produtos");
        containerListaProdutos.style.display = "block"

      }

        async function buscarporID(id) {
        try {
               const response = await fetch(`/api/products/${id}`, {
               method: 'GET',
              headers: {
              'Content-Type': 'application/json',
      },
    });

    if (!response.ok) {
      throw new Error('Produto não encontrado');
    }

    const produto = await response.json();
    console.log(produto);

    // Aqui você pode manipular o DOM para exibir os dados do produto
    // Por exemplo, preencher campos em um formulário ou exibir em um modal
    document.getElementById('nomeProduto').innerText = produto.name;
    document.getElementById('descricaoProduto').innerText = produto.description;
    // E assim por diante...

  } catch (error) {
    console.error('Erro ao buscar produto:', error);
    // Aqui você pode exibir uma mensagem de erro na interface
    alert('Erro ao buscar produto: ' + error.message);
  }
}

buscarProdutoPorId(1); // Substitua pelo ID do produto que deseja buscar



      function excluirProduto(id) {

      }


      async function enviarCadastro() {
        const nome = document.getElementById("nome").value;
        const descricao = document.getElementById("descricao").value;
        const preco = document.getElementById("preco").value;
        const peso = document.getElementById("peso").value;

        const produto = { name: nome, description: descricao, price: preco, weight: peso };

        try {
          const response = await fetch('http://localhost:8090/api/products', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(produto)
          });

          if (response.ok) {
            alert("Produto cadastrado com sucesso!");
            fecharcontainer();
          } else {
            alert("Erro ao cadastrar o produto!");
          }
        } catch (error) {
          console.error("Erro ao cadastrar produto:", error);
          alert("Erro ao cadastrar o produto!");
        }
      }
    </script>
  </body>
</html>